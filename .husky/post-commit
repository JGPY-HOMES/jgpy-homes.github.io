#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ æ£€æµ‹åˆ°æ–°çš„æäº¤ï¼Œå‡†å¤‡éƒ¨ç½²..."

# æ£€æŸ¥æ˜¯å¦åœ¨ main æˆ– master åˆ†æ”¯
current_branch=$(git branch --show-current)
if [ "$current_branch" = "main" ] || [ "$current_branch" = "master" ]; then
    echo "ğŸŒ¿ å½“å‰åœ¨ $current_branch åˆ†æ”¯ï¼Œå¼€å§‹è‡ªåŠ¨éƒ¨ç½²..."
    
    # è¯¢é—®æ˜¯å¦è¦éƒ¨ç½²ï¼ˆå¯é€‰ï¼Œä¹Ÿå¯ä»¥è‡ªåŠ¨éƒ¨ç½²ï¼‰
    read -p "æ˜¯å¦è¦éƒ¨ç½²åˆ° GitHub Pages? (Y/n): " -n 1 -r
    echo
    if [[ $REPLY =~ ^[Nn]$ ]]; then
        echo "â­ï¸  è·³è¿‡éƒ¨ç½²"
        exit 0
    fi
    
    # è¿è¡Œéƒ¨ç½²è„šæœ¬
    ./scripts/deploy.sh
else
    echo "ğŸŒ¿ å½“å‰åœ¨ $current_branch åˆ†æ”¯ï¼Œè·³è¿‡è‡ªåŠ¨éƒ¨ç½²"
    echo "ğŸ’¡ æç¤ºï¼šåªæœ‰åœ¨ main æˆ– master åˆ†æ”¯æ‰ä¼šè‡ªåŠ¨éƒ¨ç½²"
fi
