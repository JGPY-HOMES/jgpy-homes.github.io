#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 运行 pre-commit 检查..."

# 运行代码格式化
echo "📝 格式化代码..."
npm run format

# 运行代码检查
echo "🔍 运行 ESLint 检查..."
npm run lint

# 如果检查失败，阻止提交
if [ $? -ne 0 ]; then
    echo "❌ 代码检查失败，请修复错误后重试"
    exit 1
fi

echo "✅ pre-commit 检查通过"